{{template "header.html"}}

<a href="/" class="btn btn-default">Back</a><br>

<h1>Database query</h1>

<form id="form">

<h3>Campos a mostrar</h3>

<select class="form-control" name="field-1">
  <option value="0">-- Nada --</option>
  <option value="row" selected="selected">Línea</option>
  <option value="name">Nombre</option>
  <option value="surname">Apellidos</option>
  <option value="gender">Género</option>
  <option value="dni">DNI</option>
  <option value="birth">Cumpleaños</option>
</select>
<select class="form-control" name="field-2">
  <option value="0">-- Nada --</option>
  <option value="row">Línea</option>
  <option value="name" selected="selected">Nombre</option>
  <option value="surname">Apellidos</option>
  <option value="gender">Género</option>
  <option value="dni">DNI</option>
  <option value="birth">Cumpleaños</option>
</select>
<select class="form-control" name="field-3">
  <option value="0">-- Nada --</option>
  <option value="row">Línea</option>
  <option value="name">Nombre</option>
  <option value="surname" selected="selected">Apellidos</option>
  <option value="gender">Género</option>
  <option value="dni">DNI</option>
  <option value="birth">Cumpleaños</option>
</select>
<select class="form-control" name="field-4">
  <option value="0" selected="selected">-- Nada --</option>
  <option value="row">Línea</option>
  <option value="name">Nombre</option>
  <option value="surname">Apellidos</option>
  <option value="gender">Género</option>
  <option value="dni">DNI</option>
  <option value="birth">Cumpleaños</option>
</select>

<h3>Filtros</h3>

<input type="checkbox" name="filter-male" checked="checked">Hombres<br>
<input type="checkbox" name="filter-female" checked="checked">Mujeres<br>
<hr>
<input type="checkbox" name="filter-ex-socio">Ex-socio<br>
<input type="checkbox" name="filter-baja-temporal">Baja temporal<br>
<input type="checkbox" name="filter-socio-activo" checked="checked">Socio activo<br>
<!--
<hr>
<input type="checkbox" name="filter-infantiles" checked="checked">Infantiles<br>
<input type="checkbox" name="filter-juveniles" checked="checked">Juveniles<br>
<input type="checkbox" name="filter-mayores" checked="checked">Mayores<br>
-->

<h3>Orden</h3>

<select class="form-control" name="order-1">
  <option value="name" selected="selected">Nombre</option>
  <option value="surname">Apellidos</option>
  <option value="gender">Género</option>
</select>

<!--
<h3>Tipo de resultado</h3>
<select class="form-control" name="result-type">
  <option value="html">Tabla HTML</option>
  <option value="ord">Tabla Org</option>
  <option value="cvs">CSV</option>
</select>
-->

<h3>Resultado</h3>

<div id="result" style="border: 1px solid black; background: #eee">
</pre>

{{template "footer.html"}}
<script>
  function update() {
      data = $("#form").serialize();
      $.post("/ajax/query", data, function(result) {
        console.log(result);
        $("#result").html(result);
      });
  }
  $(function() {
    update();
    $("#form :input").change(function() {
      update();
      return false;
    });
  });
</script>
